<div xmlns="http://www.w3.org/1999/xhtml" lang="en"
     xmlns:f="http://typo3.org/ns/TYPO3/Fluid/ViewHelpers"
     xmlns:v="http://typo3.org/ns/FluidTYPO3/Vhs/ViewHelpers"
     data-namespace-typo3-fluid="true">

    <f:layout name="Default" />

    <!--
        =====================
            Display/ListByTopic.html
    -->

    <f:section name="Content">
<div class="projectTopicList">
    <f:for each="{projects}" as="project">
        <div class="projectList">
            <table class="table table-style1 table-striped table-sortable">
                <thead>
                <tr>
                    <th scope="col">{f:translate(key: 'projectList.label.title', extensionName: 'project_organizer')}</th>
                    <th scope="col">{f:translate(key: 'projectList.label.topic', extensionName: 'project_organizer')}</th>
                    <th scope="col">{f:translate(key: 'projectList.label.runtime', extensionName: 'project_organizer')}</th>
                    <th scope="col">{f:translate(key: 'projectList.label.status', extensionName: 'project_organizer')}</th>
                    <th scope="col">{f:translate(key: 'projectList.label.region', extensionName: 'project_organizer')}</th>
                </tr>
                </thead>
                <tbody>
                <f:for each="{projects}" as="project">
                    <tr>
                        <td>
                            <f:link.action action="detail" pluginName="{pluginName}" arguments="{uid:project.uid}" pageUid="{detailViewPage}">
                                {project.title}
                            </f:link.action>
                        </td>
                        <td>
                            <f:for each="{project.topics}" as="topic" iteration="iterator">
                                <f:link.action action="listByTopic" arguments="{topic:topic.uid}" pluginName="{pluginName}" pageUid="{listViewPage}">
                                    {topic.title}{f:if(then: '', else: ', ', condition: '{iterator.isLast}')}
                                </f:link.action>
                            </f:for>
                        </td>
                        <td><f:format.date format="d.m.Y">{project.runtimeEnd}</f:format.date></td>
                        <td>{project.status.title}</td>
                        <td>{project.region.title}</td>
                    </tr>
                </f:for>
                </tbody>
            </table>
            <div class="row">
                <div class="col-sm-12">
                    <p class="btn-spacy">
                        <a class="btn btn-primary" href="/projects/">{f:translate(key: 'projectDetail.title.overview', extensionName: 'project_organizer')}</a>
                        <a class="btn btn-primary"  href="/projects/add-project/">{f:translate(key: 'projectDetail.title.addNewProject', extensionName: 'project_organizer')}</a>
                        <f:if condition="{user} || {be_user}">
                            <f:link.action action="listByTopic" arguments="{topic:topic_id,csv:'true'}" pluginName="{pluginName}"  class="btn btn-defaut f-right">Download CSV</f:link.action>
                        </f:if>
                    </p>
                </div>
            </div>

        </div>
    </f:for>
</div>
    </f:section>
</div>

